import{_ as s,o as n,c as a,e as l}from"./app-X_F-Q7Je.js";const e={},p=l(`<h1 id="nginx" tabindex="-1"><a class="header-anchor" href="#nginx" aria-hidden="true">#</a> nginx</h1><h2 id="nginx-conf" tabindex="-1"><a class="header-anchor" href="#nginx-conf" aria-hidden="true">#</a> nginx.conf</h2><h3 id="client-max-body-size" tabindex="-1"><a class="header-anchor" href="#client-max-body-size" aria-hidden="true">#</a> client_max_body_size</h3><p>nginx 默认请求体不能超过 1M，超过就返回 413（Request Entity Too Large）错误，可通过该配置进行修改</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#569CD6;">server</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#569CD6;"> client_max_body_size </span><span style="color:#D4D4D4;">1024M;</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="二级域名转发" tabindex="-1"><a class="header-anchor" href="#二级域名转发" aria-hidden="true">#</a> 二级域名转发</h3><p>不同站点可通过资源根目录不同进行转发，也可通过二级域名进行转发，前者需要配置多个 location，后者则是在单个 location 内，获取二级域名，进行相应的转发：</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#569CD6;">server</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">location</span><span style="color:#D4D4D4;"> / {</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#6A9955;"># 正则获取二级域名</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> ($</span><span style="color:#9CDCFE;">http_host</span><span style="color:#D4D4D4;"> ~* </span><span style="color:#CE9178;">&quot;^(.*?)\\.dasu\\.fun$&quot;</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#569CD6;">	set </span><span style="color:#D4D4D4;">$</span><span style="color:#9CDCFE;">domain</span><span style="color:#D4D4D4;"> $</span><span style="color:#9CDCFE;">1</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">	    }</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#6A9955;"># 根据不同二级域名进行转发</span></span>
<span class="line"><span style="color:#D4D4D4;">	    </span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> ($</span><span style="color:#9CDCFE;">domain</span><span style="color:#D4D4D4;"> ~* </span><span style="color:#CE9178;">&quot;blog&quot;</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#569CD6;">	proxy_pass </span><span style="color:#D4D4D4;">http://192.168.5.105;</span></span>
<span class="line"><span style="color:#D4D4D4;">	    }</span></span>
<span class="line"><span style="color:#D4D4D4;">	    </span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> ($</span><span style="color:#9CDCFE;">domain</span><span style="color:#D4D4D4;"> ~* </span><span style="color:#CE9178;">&quot;gitbook&quot;</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#569CD6;">	proxy_pass </span><span style="color:#D4D4D4;">http://192.168.5.106;</span></span>
<span class="line"><span style="color:#D4D4D4;">	    }</span></span>
<span class="line"><span style="color:#D4D4D4;">   		</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#6A9955;"># 保持原请求一些信息</span></span>
<span class="line"><span style="color:#D4D4D4;">	   </span><span style="color:#569CD6;"> proxy_set_header </span><span style="color:#D4D4D4;">Host	$</span><span style="color:#9CDCFE;">host</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">	   </span><span style="color:#569CD6;"> proxy_set_header </span><span style="color:#D4D4D4;">X-Real-IP	$</span><span style="color:#9CDCFE;">remote_addr</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">	   </span><span style="color:#569CD6;"> proxy_set_header </span><span style="color:#D4D4D4;">X-Forwarded-For $</span><span style="color:#9CDCFE;">proxy_add_x_forwarded_for</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">	   	</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#6A9955;"># 默认的转发</span></span>
<span class="line"><span style="color:#D4D4D4;">	   </span><span style="color:#569CD6;"> proxy_pass </span><span style="color:#D4D4D4;">http://192.168.5.106;</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,8),o=[p];function i(c,r){return n(),a("div",null,o)}const D=s(e,[["render",i],["__file","index.html.vue"]]);export{D as default};
